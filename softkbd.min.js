const softKBDToolkit=(()=>{let e=0;const o=()=>{e++;const o=e;setTimeout(()=>{e<=o&&(e=0)},400)},c=document.createElement("div");document.body.appendChild(c),c.style.display="none",c.style.position="fixed",c.style.left="0",c.style.top="50%",c.style.width="100%",c.style.height="50%",c.style.opacity=0;const d=document.createElement("div");document.body.appendChild(d),d.innerHTML="⌨",d.style.color="#ccc",d.style.fontSize="25px",d.style.lineHeight="46px",d.style.textAlign="center",d.style.userSelect="none",d.style.display="inline-block",d.style.position="fixed",d.style.width="50px",d.style.height="50px",d.style.left=window.innerWidth-70+"px",d.style.top=window.innerHeight-70+"px",d.style.backgroundColor="#06c",d.style.borderRadius="50%",d.style.boxShadow="0 0 10px rgba(128, 128, 192, 0.5)",d.style.cursor="pointer";let h=!1;const y=()=>{c.style.display="inline-block",c.style.opacity=1,h=!0,d.style.opacity=0,d.style.display="none"},t=()=>{c.style.display="none",c.style.opacity=0,h=!1,d.style.opacity=1,d.style.display="inline-block"},i=()=>h?t():y();document.addEventListener("resize",()=>{d.style.left=window.innerWidth-70+"px",d.style.top=window.innerHeight-70+"px"});const r=e=>{d.style.boxShadow="",d.style.backgroundColor="#04a",d.innerHTML="□"},a=e=>{d.style.boxShadow="0 0 10px rgba(128, 128, 192, 0.5)",d.style.backgroundColor="#06c",d.innerHTML="⌨"};d.addEventListener("mousedown",r),d.addEventListener("touchstart",e=>{r(e),o()}),d.addEventListener("mouseup",e=>{a(e),y()}),d.addEventListener("mouseleave",a),d.addEventListener("touchend",e=>{a(e),y(),o()});const k={0:{key:"0",code:"Digit0",keyCode:48,charCode:0,which:48},1:{key:"1",code:"Digit1",keyCode:49,charCode:0,which:49},2:{key:"2",code:"Digit2",keyCode:50,charCode:0,which:50},3:{key:"3",code:"Digit3",keyCode:51,charCode:0,which:51},4:{key:"4",code:"Digit4",keyCode:52,charCode:0,which:52},5:{key:"5",code:"Digit5",keyCode:53,charCode:0,which:53},6:{key:"6",code:"Digit6",keyCode:54,charCode:0,which:54},7:{key:"7",code:"Digit7",keyCode:55,charCode:0,which:55},8:{key:"8",code:"Digit8",keyCode:56,charCode:0,which:56},9:{key:"9",code:"Digit9",keyCode:57,charCode:0,which:57},"`":{key:"`",code:"Backquote",keyCode:192,charCode:0,which:192},"-":{key:"-",code:"Minus",keyCode:189,charCode:0,which:189},"=":{key:"=",code:"Equal",keyCode:187,charCode:0,which:187},Shift:{key:"Shift",code:"ShiftLeft",keyCode:16,charCode:0,which:16},"~":{key:"~",code:"Backquote",keyCode:192,charCode:0,which:192},"!":{key:"!",code:"Digit1",keyCode:49,charCode:0,which:49},"@":{key:"@",code:"Digit2",keyCode:50,charCode:0,which:50},"#":{key:"#",code:"Digit3",keyCode:51,charCode:0,which:51},$:{key:"$",code:"Digit4",keyCode:52,charCode:0,which:52},"%":{key:"%",code:"Digit5",keyCode:53,charCode:0,which:53},"^":{key:"^",code:"Digit6",keyCode:54,charCode:0,which:54},"&":{key:"&",code:"Digit7",keyCode:55,charCode:0,which:55},"*":{key:"*",code:"Digit8",keyCode:56,charCode:0,which:56},"(":{key:"(",code:"Digit9",keyCode:57,charCode:0,which:57},")":{key:")",code:"Digit0",keyCode:48,charCode:0,which:48},_:{key:"_",code:"Minus",keyCode:189,charCode:0,which:189},"+":{key:"+",code:"Equal",keyCode:187,charCode:0,which:187},q:{key:"q",code:"KeyQ",keyCode:81,charCode:0,which:81},w:{key:"w",code:"KeyW",keyCode:87,charCode:0,which:87},e:{key:"e",code:"KeyE",keyCode:69,charCode:0,which:69},r:{key:"r",code:"KeyR",keyCode:82,charCode:0,which:82},t:{key:"t",code:"KeyT",keyCode:84,charCode:0,which:84},y:{key:"y",code:"KeyY",keyCode:89,charCode:0,which:89},u:{key:"u",code:"KeyU",keyCode:85,charCode:0,which:85},i:{key:"i",code:"KeyI",keyCode:73,charCode:0,which:73},o:{key:"o",code:"KeyO",keyCode:79,charCode:0,which:79},p:{key:"p",code:"KeyP",keyCode:80,charCode:0,which:80},"[":{key:"[",code:"BracketLeft",keyCode:219,charCode:0,which:219},"]":{key:"]",code:"BracketRight",keyCode:221,charCode:0,which:221},"\\":{key:"\\",code:"Backslash",keyCode:220,charCode:0,which:220},Q:{key:"Q",code:"KeyQ",keyCode:81,charCode:0,which:81},W:{key:"W",code:"KeyW",keyCode:87,charCode:0,which:87},E:{key:"E",code:"KeyE",keyCode:69,charCode:0,which:69},R:{key:"R",code:"KeyR",keyCode:82,charCode:0,which:82},T:{key:"T",code:"KeyT",keyCode:84,charCode:0,which:84},Y:{key:"Y",code:"KeyY",keyCode:89,charCode:0,which:89},U:{key:"U",code:"KeyU",keyCode:85,charCode:0,which:85},I:{key:"I",code:"KeyI",keyCode:73,charCode:0,which:73},O:{key:"O",code:"KeyO",keyCode:79,charCode:0,which:79},P:{key:"P",code:"KeyP",keyCode:80,charCode:0,which:80},"{":{key:"{",code:"BracketLeft",keyCode:219,charCode:0,which:219},"}":{key:"}",code:"BracketRight",keyCode:221,charCode:0,which:221},"|":{key:"|",code:"Backslash",keyCode:220,charCode:0,which:220},a:{key:"a",code:"KeyA",keyCode:65,charCode:0,which:65},s:{key:"s",code:"KeyS",keyCode:83,charCode:0,which:83},d:{key:"d",code:"KeyD",keyCode:68,charCode:0,which:68},f:{key:"f",code:"KeyF",keyCode:70,charCode:0,which:70},g:{key:"g",code:"KeyG",keyCode:71,charCode:0,which:71},h:{key:"h",code:"KeyH",keyCode:72,charCode:0,which:72},j:{key:"j",code:"KeyJ",keyCode:74,charCode:0,which:74},k:{key:"k",code:"KeyK",keyCode:75,charCode:0,which:75},l:{key:"l",code:"KeyL",keyCode:76,charCode:0,which:76},";":{key:";",code:"Semicolon",keyCode:186,charCode:0,which:186},"'":{key:"'",code:"Quote",keyCode:222,charCode:0,which:222},A:{key:"A",code:"KeyA",keyCode:65,charCode:0,which:65},S:{key:"S",code:"KeyS",keyCode:83,charCode:0,which:83},D:{key:"D",code:"KeyD",keyCode:68,charCode:0,which:68},F:{key:"F",code:"KeyF",keyCode:70,charCode:0,which:70},G:{key:"G",code:"KeyG",keyCode:71,charCode:0,which:71},H:{key:"H",code:"KeyH",keyCode:72,charCode:0,which:72},J:{key:"J",code:"KeyJ",keyCode:74,charCode:0,which:74},K:{key:"K",code:"KeyK",keyCode:75,charCode:0,which:75},L:{key:"L",code:"KeyL",keyCode:76,charCode:0,which:76},":":{key:":",code:"Semicolon",keyCode:186,charCode:0,which:186},'"':{key:'"',code:"Quote",keyCode:222,charCode:0,which:222},z:{key:"z",code:"KeyZ",keyCode:90,charCode:0,which:90},x:{key:"x",code:"KeyX",keyCode:88,charCode:0,which:88},c:{key:"c",code:"KeyC",keyCode:67,charCode:0,which:67},v:{key:"v",code:"KeyV",keyCode:86,charCode:0,which:86},b:{key:"b",code:"KeyB",keyCode:66,charCode:0,which:66},n:{key:"n",code:"KeyN",keyCode:78,charCode:0,which:78},m:{key:"m",code:"KeyM",keyCode:77,charCode:0,which:77},",":{key:",",code:"Comma",keyCode:188,charCode:0,which:188},".":{key:".",code:"Period",keyCode:190,charCode:0,which:190},"/":{key:"/",code:"Slash",keyCode:191,charCode:0,which:191},Z:{key:"Z",code:"KeyZ",keyCode:90,charCode:0,which:90},X:{key:"X",code:"KeyX",keyCode:88,charCode:0,which:88},C:{key:"C",code:"KeyC",keyCode:67,charCode:0,which:67},V:{key:"V",code:"KeyV",keyCode:86,charCode:0,which:86},B:{key:"B",code:"KeyB",keyCode:66,charCode:0,which:66},N:{key:"N",code:"KeyN",keyCode:78,charCode:0,which:78},M:{key:"M",code:"KeyM",keyCode:77,charCode:0,which:77},"<":{key:"<",code:"Comma",keyCode:188,charCode:0,which:188},">":{key:">",code:"Period",keyCode:190,charCode:0,which:190},"?":{key:"?",code:"Slash",keyCode:191,charCode:0,which:191},Backspace:{key:"Backspace",code:"Backspace",keyCode:8,charCode:0,which:8},Enter:{key:"Enter",code:"Enter",keyCode:13,charCode:0,which:13},Space:{key:" ",code:"Space",keyCode:32,charCode:0,which:32}};let C={},n=!1;const s=(d,h,y,t,i)=>{const r=document.createElement("div");c.appendChild(r),C[d]=r,r.style.display="fixed",r.innerText=d,r.style.color="var(--fg-color)",r.style.border="solid 2px var(--fg-color)",r.style.borderRadius="5px",r.style.textAlign="center",r.style.position="fixed",r.style.left=h+.05*(y-h)+"%",r.style.width=.9*(y-h)+"%",r.style.top=t*(.96*g)+.05*(i-t)+100*(1-g)+"%",r.style.height=.96*g*(i-t)*.9+"%",r.style.lineHeight="100%",r.style.fontSize=Math.min((y-h)*screen.availWidth,.5*(i-t)*screen.availHeight)/240+"px",r.style.userSelect="none",r.style.cursor="pointer";const a=[k[d]];1===d.length&&d.toUpperCase()!==d&&a.push(k[d.toUpperCase()]),console.assert(0!==a.length);const s=e=>{const o=n?a[a.length-1]:a[0];return document.dispatchEvent(new KeyboardEvent("keydown",{key:o.key,code:o.code,keyCode:o.keycode,charCode:o.charcode,which:o.which,bubbles:!0,cancelable:!0}))},l=e=>{const o=n?a[a.length-1]:a[0];return document.dispatchEvent(new KeyboardEvent("keyup",{key:d,code:o.code,keyCode:o.keycode,charCode:o.charcode,which:o.which,bubbles:!0,cancelable:!0}))};return r.addEventListener("mousedown",o=>{e||s(o)}),r.addEventListener("touchstart",e=>{s(e),o()}),r.addEventListener("mouseup",o=>{e||l(o)}),r.addEventListener("touchend",e=>{l(e),o()}),r.addEventListener("mouseleave",o=>{e||l(o)}),r},l=(d,h,y,t,i,r)=>{const a=document.createElement("div");return c.appendChild(a),C[d]=a,a.style.display="fixed",a.innerText=d,a.style.color="var(--fg-color)",a.style.border="solid 2px var(--fg-color)",a.style.borderRadius="5px",a.style.textAlign="center",a.style.position="fixed",a.style.left=h+.05*(y-h)+"%",a.style.width=.9*(y-h)+"%",a.style.top=t*(.96*g)+.05*(i-t)+100*(1-g)+"%",a.style.height=.96*g*(i-t)*.9+"%",a.style.lineHeight="100%",a.style.fontSize=Math.min((y-h)*screen.availWidth,.5*(i-t)*screen.availHeight)/240+"px",a.style.userSelect="none",a.style.cursor="pointer",a.addEventListener("mousedown",o=>{e||r(o)}),a.addEventListener("touchstart",e=>{r(e),o()}),a},w=(()=>{const e=()=>{for(let e of Object.values(C))1===e.innerText.length&&(e.innerText=e.innerText.toUpperCase());C.Caps.style.backgroundColor="var(--fg-color)",C.Caps.style.color="var(--bg-color)"},o=()=>{for(let e of Object.values(C))1===e.innerText.length&&(e.innerText=e.innerText.toLowerCase());C.Caps.style.backgroundColor="var(--bg-color)",C.Caps.style.color="var(--fg-color)"},c=()=>{n?(n=!1,o()):(n=!0,e())};return c})(),p=480;let g=.5;const u=['~<?:"_+{}|',"`>/;'-=[]\\","!@#$%^&*()","1234567890","qwertyuiop","asdfghjkl","zxcvbnm"],K=["!@#$%^&*()~`'\" ","1234567890_+{}|","qwertyuiop-=[]\\","asdfghjkl;<>? ","zxcvbnm      "];if(screen.availWidth>=p){g=Math.min(.5,screen.availWidth/screen.availHeight*.5);let e=K;const o=[0,20,40,60,80],c=[20,40,60,80,100];for(let d=0;d<e.length;d++){const h=e[d],y=h.length,t=(100-100*y/15)/2;for(let e=0;e<y;e++){const y=h[e];" "!==y&&s(y,t+100/15*e,t+100/15*(e+1),o[d],c[d])}}s(":",10+100/15*8,70,o[4],c[4]),s(",",70,10+100/15*10,o[4],c[4]),s(".",10+100/15*10,10+100/15*11,o[4],c[4]),s("/",10+100/15*11,90,o[4],c[4]),s("Backspace",90,100,o[4],c[4]).innerText="⟵",s("Space",53.333333333333336,10+100/15*8,o[4],c[4]).innerText="␣",s("Enter",90,100,o[3],c[3]).innerText="↵",l("👁",100/15*14,100,o[0],c[0],t),l("Caps",0,(100-1300/15)/2,o[4],c[4],w).innerText="↑"}else{g=Math.min(.5,screen.availWidth/screen.availHeight*1.5);let e=u;const o=[0,10,20,30,44,58,72,86],c=[10,20,30,44,58,72,86,100];for(let d=0;d<e.length;d++){const h=e[d],y=h.length,t=(100-10*y)/2;for(let e=0;e<y;e++){const y=h[e];" "!==y&&s(y,t+10*e,t+10*(e+1),o[d],c[d])}}s(",",15,25,o[7],c[7]),s(".",25,35,o[7],c[7]),s("Backspace",85,100,o[6],c[6]).innerText="⟵",s("Space",35,75,o[7],c[7]).innerText="␣",s("Enter",75,100,o[7],c[7]).innerText="↵",l("👁",0,15,o[7],c[7],t),l("Caps",0,15,o[6],c[6],w).innerText="↑"}return{show:y,hide:t,toggle:i,toggleCaps:w}})();